<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeQ Cloud Manager - ×ª×™×¢×•×“ ×˜×›× ×™</title>
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #fff;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header / Cover Page */
        .cover-page {
            text-align: center;
            padding: 100px 20px;
            page-break-after: always;
            background: linear-gradient(135deg, #C41E3A 0%, #8B1529 100%);
            color: white;
            border-radius: 10px;
            margin-bottom: 40px;
        }

        .logo-placeholder {
            width: 200px;
            height: 80px;
            background: white;
            margin: 0 auto 30px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #C41E3A;
            font-weight: bold;
            font-size: 24px;
        }

        .cover-page h1 {
            font-size: 48px;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .cover-page .subtitle {
            font-size: 24px;
            margin-bottom: 40px;
            opacity: 0.9;
        }

        .cover-page .date {
            font-size: 18px;
            opacity: 0.8;
            margin-top: 60px;
        }

        /* Table of Contents */
        .toc {
            page-break-after: always;
            padding: 40px 0;
        }

        .toc h2 {
            color: #C41E3A;
            font-size: 32px;
            margin-bottom: 30px;
            border-bottom: 3px solid #C41E3A;
            padding-bottom: 10px;
        }

        .toc ul {
            list-style: none;
        }

        .toc li {
            margin: 15px 0;
            padding: 10px;
            border-right: 4px solid #C41E3A;
            background: #f8f9fa;
        }

        .toc a {
            text-decoration: none;
            color: #333;
            font-size: 18px;
            display: block;
        }

        .toc a:hover {
            color: #C41E3A;
        }

        /* Content Sections */
        .section {
            page-break-inside: avoid;
            margin-bottom: 40px;
        }

        h2 {
            color: #C41E3A;
            font-size: 28px;
            margin: 40px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #C41E3A;
            page-break-after: avoid;
        }

        h3 {
            color: #8B1529;
            font-size: 22px;
            margin: 30px 0 15px 0;
            page-break-after: avoid;
        }

        h4 {
            color: #555;
            font-size: 18px;
            margin: 20px 0 10px 0;
            page-break-after: avoid;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            page-break-inside: avoid;
        }

        th {
            background: linear-gradient(135deg, #C41E3A 0%, #8B1529 100%);
            color: white;
            padding: 12px;
            text-align: right;
            font-weight: 600;
        }

        td {
            padding: 10px 12px;
            border: 1px solid #ddd;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        /* Boxes */
        .info-box {
            background: #e3f2fd;
            border-right: 5px solid #2196F3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            page-break-inside: avoid;
        }

        .warning-box {
            background: #fff3cd;
            border-right: 5px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            page-break-inside: avoid;
        }

        .success-box {
            background: #d4edda;
            border-right: 5px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            page-break-inside: avoid;
        }

        .danger-box {
            background: #f8d7da;
            border-right: 5px solid #dc3545;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            page-break-inside: avoid;
        }

        /* Code blocks */
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 20px 0;
            page-break-inside: avoid;
        }

        pre code {
            background: none;
            color: #f8f8f2;
            padding: 0;
        }

        /* Lists */
        ul, ol {
            margin: 15px 0 15px 30px;
        }

        li {
            margin: 8px 0;
        }

        /* Icons */
        .icon {
            display: inline-block;
            width: 20px;
            text-align: center;
            margin-left: 5px;
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 60px;
            padding-top: 20px;
            border-top: 2px solid #C41E3A;
            color: #666;
            font-size: 14px;
        }

        /* Print specific */
        @media print {
            body {
                background: white;
            }

            .no-print {
                display: none;
            }

            a {
                color: #333;
                text-decoration: none;
            }

            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Cover Page -->
        <div class="cover-page">
            <div class="logo-placeholder">
                [××§×•× ×œ×œ×•×’×•]
                <br>
                <span style="font-size: 16px;">Mafil Solutions</span>
            </div>
            <h1>SafeQ Cloud Manager</h1>
            <div class="subtitle">×ª×™×¢×•×“ ×˜×›× ×™ ×•××“×¨×™×š ××‘×˜×—×”</div>
            <div class="subtitle">×’×¨×¡×” 2.0.1</div>
            <div class="date">× ×•×‘××‘×¨ 2025</div>
        </div>

        <!-- Table of Contents -->
        <div class="toc">
            <h2>ğŸ“‹ ×ª×•×›×Ÿ ×¢× ×™×™× ×™×</h2>
            <ul>
                <li><a href="#overview">1. ×¡×§×™×¨×” ×›×œ×œ×™×ª</a></li>
                <li><a href="#architecture">2. ××¨×›×™×˜×§×˜×•×¨×” ×•×ª×©×ª×™×ª</a></li>
                <li><a href="#authentication">3. ××¢×¨×›×ª ××™××•×ª ×•×”×–×“×”×•×ª</a></li>
                <li><a href="#authorization">4. ×”×¨×©××•×ª ×•×ª×¤×§×™×“×™×</a></li>
                <li><a href="#entra-setup">5. ×”×§××ª ××¤×œ×™×§×¦×™×” ×‘-Entra ID</a></li>
                <li><a href="#deployment">6. ×¤×¨×™×¡×” ×‘-Railway</a></li>
                <li><a href="#security">7. ××‘×˜×—×” ×•×¡×•×“×™×•×ª</a></li>
                <li><a href="#maintenance">8. ×ª×—×–×•×§×” ×•×ª××™×›×”</a></li>
            </ul>
        </div>

        <!-- Content -->
        <div class="page-break"></div>

        <section id="overview" class="section">
            <h2>1. ğŸ¯ ×¡×§×™×¨×” ×›×œ×œ×™×ª</h2>

            <h3>1.1 ××•×“×•×ª ×”××¢×¨×›×ª</h3>
            <p>
                <strong>SafeQ Cloud Manager</strong> ×”×™× ×¤×œ×˜×¤×•×¨××ª × ×™×”×•×œ ××ª×§×“××ª ×œ× ×™×”×•×œ ××©×ª××©×™×, ×§×‘×•×¦×•×ª ×•×“×•×—×•×ª
                ×‘××¢×¨×›×ª SafeQ Cloud. ×”××¢×¨×›×ª ××¦×™×¢×” ×××©×§ ×™×“×™×“×•×ª×™ ×œ××©×ª××© ×¢× ×× ×’× ×•× ×™ ××‘×˜×—×” ××ª×§×“××™× ×•×ª××™×›×” ×‘××™××•×ª
                ×”×™×‘×¨×™×“×™ ×”××©×œ×‘ Entra ID ×•××©×ª××©×™× ××§×•××™×™×.
            </p>

            <div class="success-box">
                <strong>âœ… ×™×ª×¨×•× ×•×ª ×”××¢×¨×›×ª:</strong>
                <ul>
                    <li>××™××•×ª ×”×™×‘×¨×™×“×™ ×¢× Entra ID</li>
                    <li>× ×™×”×•×œ ×”×¨×©××•×ª ××‘×•×¡×¡ ×ª×¤×§×™×“×™× (RBAC)</li>
                    <li>×”×¤×¨×“×ª × ×ª×•× ×™× ×œ×¤×™ ×‘×ª×™ ×¡×¤×¨</li>
                    <li>×“×•×—×•×ª ××ª×§×“××™× ×¢× ×¡×™× ×•× ×™×</li>
                    <li>×¤×¨×™×¡×” ×××•×‘×˜×—×ª ×‘-Railway</li>
                </ul>
            </div>

            <h3>1.2 ×§×”×œ ×™×¢×“</h3>
            <table>
                <tr>
                    <th>×ª×¤×§×™×“</th>
                    <th>×ª×™××•×¨</th>
                </tr>
                <tr>
                    <td><strong>×× ×”×œ×™ IT</strong></td>
                    <td>× ×™×”×•×œ ××œ× ×©×œ ××©×ª××©×™× ×•×§×‘×•×¦×•×ª ×‘××¢×¨×›×ª</td>
                </tr>
                <tr>
                    <td><strong>×¦×•×•×ª ×ª××™×›×”</strong></td>
                    <td>×ª××™×›×” ×•×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª ×œ××©×ª××©×™×</td>
                </tr>
                <tr>
                    <td><strong>×× ×”×œ×™ ×‘×ª×™ ×¡×¤×¨</strong></td>
                    <td>×¦×¤×™×™×” ×‘×“×•×—×•×ª ×©×œ ×‘×™×ª ×”×¡×¤×¨ ×©×œ×”×</td>
                </tr>
                <tr>
                    <td><strong>×¦×•×¤×™×</strong></td>
                    <td>×¦×¤×™×™×” ×‘×œ×‘×“ ×‘××™×“×¢</td>
                </tr>
            </table>

            <h3>1.3 ×˜×›× ×•×œ×•×’×™×•×ª</h3>
            <ul>
                <li><strong>Frontend:</strong> Streamlit (Python)</li>
                <li><strong>Backend:</strong> Python 3.11+</li>
                <li><strong>Authentication:</strong> Microsoft Entra ID (OAuth 2.0 + OIDC)</li>
                <li><strong>Deployment:</strong> Railway (Cloud Platform)</li>
                <li><strong>API:</strong> SafeQ Cloud REST API</li>
                <li><strong>Version Control:</strong> GitHub (Private Repository)</li>
            </ul>
        </section>

        <div class="page-break"></div>

        <section id="architecture" class="section">
            <h2>2. ğŸ—ï¸ ××¨×›×™×˜×§×˜×•×¨×” ×•×ª×©×ª×™×ª</h2>

            <h3>2.1 ××¨×›×™×˜×§×˜×•×¨×” ×›×œ×œ×™×ª</h3>
            <p>
                ×”××¢×¨×›×ª ×‘× ×•×™×” ×‘××¨×›×™×˜×§×˜×•×¨×” ×©×œ ×©×œ×•×© ×©×›×‘×•×ª ×¢× ×”×¤×¨×“×” ×‘×¨×•×¨×” ×‘×™×Ÿ ×¨×›×™×‘×™×:
            </p>

            <div class="info-box">
                <strong>ğŸ“ ×©×›×‘×•×ª ×”××¢×¨×›×ª:</strong>
                <ol>
                    <li><strong>×©×›×‘×ª ×ª×¦×•×’×” (Presentation Layer):</strong> ×××©×§ Streamlit ××‘×•×¡×¡ ×“×¤×“×¤×Ÿ</li>
                    <li><strong>×©×›×‘×ª ×œ×•×’×™×§×” (Business Logic Layer):</strong> ×¢×™×‘×•×“ × ×ª×•× ×™×, ×”×¨×©××•×ª ×•××™××•×ª</li>
                    <li><strong>×©×›×‘×ª × ×ª×•× ×™× (Data Layer):</strong> SafeQ Cloud API + Entra ID Graph API</li>
                </ol>
            </div>

            <h3>2.2 ××‘× ×” ×ª×™×§×™×•×ª ×”×¤×¨×•×™×§×˜</h3>
            <pre><code>SafeQCloudManager/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py                 # × ×§×•×“×ª ×›× ×™×¡×” ×¨××©×™×ª
â”‚   â”œâ”€â”€ main_utils.py           # ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ ×•××™××•×ª
â”‚   â”œâ”€â”€ config.py               # × ×™×”×•×œ ×”×’×“×¨×•×ª
â”‚   â”œâ”€â”€ permissions.py          # ××¢×¨×›×ª ×”×¨×©××•×ª ×”×™×‘×¨×™×“×™×ª
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ home.py            # ×“×£ ×”×‘×™×ª
â”‚   â”‚   â”œâ”€â”€ users/             # ××•×“×•×œ × ×™×”×•×œ ××©×ª××©×™×
â”‚   â”‚   â”œâ”€â”€ reports/           # ××•×“×•×œ ×“×•×—×•×ª
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ safeq_api.py       # ×ª×§×©×•×¨×ª ×¢× SafeQ API
â”‚       â””â”€â”€ audit_logger.py    # ×¨×™×©×•× ××™×¨×•×¢×™×
â”œâ”€â”€ .streamlit/
â”‚   â””â”€â”€ config.toml            # ×”×’×“×¨×•×ª Streamlit
â”œâ”€â”€ requirements.txt           # ×ª×œ×•×™×•×ª Python
â”œâ”€â”€ railway.toml              # ×”×’×“×¨×•×ª Railway
â”œâ”€â”€ Procfile                  # ×”×¤×¢×œ×ª ×”××¤×œ×™×§×¦×™×”
â””â”€â”€ docs/                     # ×ª×™×¢×•×“</code></pre>

            <h3>2.3 ×ª×©×ª×™×ª Railway</h3>
            <table>
                <tr>
                    <th>×¨×›×™×‘</th>
                    <th>×ª×™××•×¨</th>
                </tr>
                <tr>
                    <td><strong>Platform</strong></td>
                    <td>Railway.app - PaaS (Platform as a Service)</td>
                </tr>
                <tr>
                    <td><strong>Region</strong></td>
                    <td>× ×™×ª×Ÿ ×œ×‘×—×™×¨×” (××•××œ×¥: ××™×¨×•×¤×” ×œ×‘×™×¦×•×¢×™× ×˜×•×‘×™× ×™×•×ª×¨)</td>
                </tr>
                <tr>
                    <td><strong>Build</strong></td>
                    <td>Nixpacks (×–×™×”×•×™ ××•×˜×•××˜×™ ×©×œ Python)</td>
                </tr>
                <tr>
                    <td><strong>Runtime</strong></td>
                    <td>Python 3.11+</td>
                </tr>
                <tr>
                    <td><strong>Port</strong></td>
                    <td>×“×™× ××™ ($PORT environment variable)</td>
                </tr>
            </table>

            <div class="warning-box">
                <strong>âš ï¸ ×—×©×•×‘:</strong> ×”××¢×¨×›×ª ×¨×¦×” ×‘-headless mode ×œ×œ× GUI ×©×œ ×“×¤×“×¤×Ÿ.
                ×’×™×©×” ×œ××¢×¨×›×ª × ×¢×©×™×ª ×¨×§ ×“×¨×š ×”-URL ×”×¦×™×‘×•×¨×™ ×©×œ Railway.
            </div>
        </section>

        <div class="page-break"></div>

        <section id="authentication" class="section">
            <h2>3. ğŸ” ××¢×¨×›×ª ××™××•×ª ×•×”×–×“×”×•×ª</h2>

            <h3>3.1 ×©×™×˜×•×ª ××™××•×ª × ×ª××›×•×ª</h3>

            <h4>3.1.1 ×”×ª×—×‘×¨×•×ª ×¢× Entra ID (×¨××©×™×ª)</h4>
            <p>
                ×©×™×˜×ª ×”××™××•×ª ×”×¢×™×§×¨×™×ª ×©×œ ×”××¢×¨×›×ª ××‘×•×¡×¡×ª ×¢×œ Microsoft Entra ID (×œ×©×¢×‘×¨ Azure AD)
                ×‘×××¦×¢×•×ª ×¤×¨×•×˜×•×§×•×œ OAuth 2.0 ×•-OpenID Connect.
            </p>

            <div class="info-box">
                <strong>ğŸ”„ ×ª×”×œ×™×š ×”××™××•×ª:</strong>
                <ol>
                    <li>××©×ª××© ×œ×•×—×¥ ×¢×œ "×”×ª×—×‘×¨ ×¢× Entra ID"</li>
                    <li>×”×¤× ×™×” ×œ×“×£ ×”×–×“×”×•×ª ×©×œ Microsoft</li>
                    <li>××©×ª××© ××–×“×”×” ×¢× ×—×©×‘×•×Ÿ ××¨×’×•× ×™</li>
                    <li>Entra ID ××—×–×™×¨ authorization code</li>
                    <li>×”××¢×¨×›×ª ××—×œ×™×¤×” ××ª ×”×§×•×“ ×‘-access token</li>
                    <li>×©×œ×™×¤×ª ×¤×¨×˜×™ ××©×ª××© ×•×§×‘×•×¦×•×ª ×-Graph API</li>
                    <li><strong>×‘×“×™×§×” ×›×¤×•×œ×”:</strong>
                        <ul>
                            <li>×•×™×“×•× ×”×©×ª×™×™×›×•×ª ×œ×§×‘×•×¦×ª SafeQ ×‘-Entra ID</li>
                            <li>××™××•×ª ×§×™×•× ××©×ª××© ××§×•××™ ×ª×•×× ×‘-SafeQ Cloud</li>
                        </ul>
                    </li>
                    <li>×‘× ×™×™×ª ×¤×¨×•×¤×™×œ ×”×¨×©××•×ª ×”×™×‘×¨×™×“×™</li>
                    <li>×™×¦×™×¨×ª session ×××•××ª</li>
                </ol>
            </div>

            <h4>3.1.2 ×”×ª×—×‘×¨×•×ª ×× ×”×œ ××§×•××™ (×—×™×¨×•×)</h4>
            <p>
                ×œ××§×¨×™ ×—×™×¨×•× ××• ×ª×—×–×•×§×”, ×§×™×™××ª ××¤×©×¨×•×ª ×œ×”×ª×—×‘×¨×•×ª ××§×•××™×ª ×¢× ××©×ª××©×™ ×—×™×¨×•×
                ×©××•×’×“×¨×™× ×‘-environment variables.
            </p>

            <div class="danger-box">
                <strong>ğŸ”’ ××‘×˜×—×”:</strong> ××©×ª××©×™ ×—×™×¨×•× ××•×’×“×¨×™× ×¨×§ ×‘-Railway environment variables
                ×•×œ× × ×©××¨×™× ×‘×§×•×“. ×’×™×©×” ×œ××©×ª××©×™× ××œ×• ××•×’×‘×œ×ª ×œ×× ×”×œ×™ ××¢×¨×›×ª ×‘×œ×‘×“.
            </div>

            <h3>3.2 ××™××•×ª ×”×™×‘×¨×™×“×™ (Hybrid Authentication)</h3>
            <p>
                ×”××¢×¨×›×ª ××©×œ×‘×ª ×©× ×™ ××§×•×¨×•×ª ×”×¨×©××•×ª - Entra ID ×•-SafeQ Cloud - ×›×“×™ ×œ×™×¦×•×¨ ×¤×¨×•×¤×™×œ ×”×¨×©××•×ª ××œ×:
            </p>

            <table>
                <tr>
                    <th>××§×•×¨</th>
                    <th>××™×“×¢ ××¡×•×¤×§</th>
                    <th>×©×™××•×©</th>
                </tr>
                <tr>
                    <td><strong>Entra ID</strong></td>
                    <td>
                        â€¢ ×©× ××©×ª××© ×•××™××™×™×œ<br>
                        â€¢ ×§×‘×•×¦×•×ª ××¨×’×•× ×™×•×ª<br>
                        â€¢ ×ª×¤×§×™×“ ×‘×¡×™×¡×™ (Role)
                    </td>
                    <td>
                        â€¢ ×–×™×”×•×™ ×¨××©×•× ×™<br>
                        â€¢ ×§×‘×™×¢×ª ×¨××ª ×”×¨×©××” ×›×œ×œ×™×ª<br>
                        â€¢ ××™××•×ª ×”×©×ª×™×™×›×•×ª ××¨×’×•× ×™×ª
                    </td>
                </tr>
                <tr>
                    <td><strong>SafeQ Cloud</strong></td>
                    <td>
                        â€¢ ××©×ª××© ××§×•××™ ×ª×•××<br>
                        â€¢ ×§×‘×•×¦×•×ª ××§×•××™×•×ª<br>
                        â€¢ ××—×œ×§×•×ª (Departments)
                    </td>
                    <td>
                        â€¢ ×¡×™× ×•×Ÿ × ×ª×•× ×™× ×œ×¤×™ ×‘×ª×™ ×¡×¤×¨<br>
                        â€¢ ×”×¨×©××•×ª ×’×¨× ×•×œ×¨×™×•×ª<br>
                        â€¢ × ×™×”×•×œ ×’×™×©×” ×œ××©××‘×™×
                    </td>
                </tr>
            </table>

            <h3>3.3 ×‘×“×™×§×ª ×§×‘×•×¦×•×ª</h3>

            <h4>×§×‘×•×¦×•×ª Entra ID</h4>
            <p>×”××¢×¨×›×ª ×‘×•×“×§×ª ×”×©×ª×™×™×›×•×ª ×œ××—×ª ××”×§×‘×•×¦×•×ª ×”×‘××•×ª:</p>
            <ul>
                <li><code>SafeQ-Admins</code> â†’ ×× ×”×œ ××¢×¨×›×ª (admin)</li>
                <li><code>SafeQ-Support</code> â†’ ×¦×•×•×ª ×ª××™×›×” (support)</li>
                <li><code>SafeQ-Viewers</code> â†’ ×¦×•×¤×™× (viewer)</li>
                <li><code>SafeQ-School-Managers</code> â†’ ×× ×”×œ×™ ×‘×ª×™ ×¡×¤×¨ (school_manager)</li>
            </ul>

            <div class="warning-box">
                <strong>âš ï¸ ×”×¢×¨×”:</strong> ××©×ª××© ×—×™×™×‘ ×œ×”×™×•×ª ×—×‘×¨ ×‘<strong>×œ×¤×—×•×ª ××—×ª</strong> ××”×§×‘×•×¦×•×ª ×”×œ×œ×•
                ×›×“×™ ×œ×§×‘×œ ×’×™×©×” ×œ××¢×¨×›×ª.
            </div>

            <h4>×§×‘×•×¦×•×ª SafeQ Cloud (××§×•××™×•×ª)</h4>
            <p>
                ×œ××—×¨ ××™××•×ª Entra ID, ×”××¢×¨×›×ª ××—×¤×©×ª ××©×ª××© ××§×•××™ ×ª×•×× ×‘-SafeQ Cloud ×•×‘×•×“×§×ª ××ª ×”×§×‘×•×¦×•×ª ×”××§×•××™×•×ª ×©×œ×•.
                ×”×§×‘×•×¦×•×ª ×”××§×•××™×•×ª ×§×•×‘×¢×•×ª ××ª ×‘×ª×™ ×”×¡×¤×¨ (Departments) ×©×”××©×ª××© ×™×›×•×œ ×œ×’×©×ª ××œ×™×”×.
            </p>

            <pre><code>×“×•×’××”:
××©×ª××© Entra: yossi.cohen@school.org.il
â†“ ×××•××ª ×‘-Entra ID
â†“ ×ª×¤×§×™×“: school_manager
â†“
×—×™×¤×•×© ××©×ª××© ××§×•××™: yossi.cohen
â†“ × ××¦× ×‘-SafeQ Cloud
â†“ ×§×‘×•×¦×•×ª ××§×•××™×•×ª: ["School_BeitSefer_A", "School_BeitSefer_B"]
â†“
×”×¨×©××•×ª ×¡×•×¤×™×•×ª:
- ×ª×¤×§×™×“: school_manager
- ××—×œ×§×•×ª: ["BeitSefer_A", "BeitSefer_B"]
- ×’×™×©×”: ×¨×§ ×œ×“×•×—×•×ª ×©×œ ×‘×ª×™ ×¡×¤×¨ ××œ×•</code></pre>

            <h3>3.4 ×× ×’× ×•×Ÿ Session</h3>
            <ul>
                <li><strong>××©×š Session:</strong> 480 ×“×§×•×ª (8 ×©×¢×•×ª) - × ×™×ª×Ÿ ×œ×”×’×“×¨×”</li>
                <li><strong>Session ID:</strong> UUID ×™×™×—×•×“×™ ×œ×›×œ session</li>
                <li><strong>Stored Data:</strong> ×©× ××©×ª××©, ×ª×¤×§×™×“, ×”×¨×©××•×ª, ×–××Ÿ ×›× ×™×¡×”</li>
                <li><strong>Security:</strong> Session tokens ×××•×—×¡× ×™× ×¨×§ ×‘-memory (×œ× ×‘×“×™×¡×§)</li>
            </ul>
        </section>

        <div class="page-break"></div>

        <section id="authorization" class="section">
            <h2>4. ğŸ‘¥ ×”×¨×©××•×ª ×•×ª×¤×§×™×“×™×</h2>

            <h3>4.1 ×¨××•×ª ×”×¨×©××”</h3>
            <p>
                ×”××¢×¨×›×ª ××©×ª××©×ª ×‘××•×“×œ RBAC (Role-Based Access Control) ×¢× ×—××© ×¨××•×ª ×”×¨×©××”:
            </p>

            <table>
                <tr>
                    <th>×ª×¤×§×™×“</th>
                    <th>×§×‘×•×¦×ª Entra</th>
                    <th>×”×¨×©××•×ª</th>
                </tr>
                <tr>
                    <td><strong>ğŸ‘ï¸ Viewer</strong></td>
                    <td>SafeQ-Viewers</td>
                    <td>
                        â€¢ ×¦×¤×™×™×” ×‘××©×ª××©×™×<br>
                        â€¢ ×¦×¤×™×™×” ×‘×§×‘×•×¦×•×ª<br>
                        â€¢ ×¦×¤×™×™×” ×‘×“×•×—×•×ª<br>
                        âŒ ×œ×œ× ×”×¨×©××•×ª ×¢×¨×™×›×”
                    </td>
                </tr>
                <tr>
                    <td><strong>ğŸ› ï¸ Support</strong></td>
                    <td>SafeQ-Support</td>
                    <td>
                        â€¢ ×›×œ ×”×¨×©××•×ª Viewer<br>
                        â€¢ <strong>×™×¦×™×¨×ª ××©×ª××©×™× ×—×“×©×™×</strong><br>
                        â€¢ ×¢×¨×™×›×ª ××©×ª××©×™× ×§×™×™××™×<br>
                        â€¢ ×”×•×¡×¤×ª ××©×ª××©×™× ×œ×§×‘×•×¦×•×ª<br>
                        â€¢ ×™×™×¦×•× × ×ª×•× ×™×<br>
                        âŒ ×œ× ×™×›×•×œ ×œ×”×¡×™×¨ ××©×ª××©×™× ××§×‘×•×¦×•×ª
                    </td>
                </tr>
                <tr>
                    <td><strong>ğŸ‘‘ Admin</strong></td>
                    <td>SafeQ-Admins</td>
                    <td>
                        â€¢ ×›×œ ×”×¨×©××•×ª Support<br>
                        â€¢ <strong>×”×¡×¨×ª ××©×ª××©×™× ××§×‘×•×¦×•×ª</strong><br>
                        â€¢ × ×™×”×•×œ ×§×‘×•×¦×•×ª ××œ×<br>
                        â€¢ ×’×™×©×” ×œ×›×œ ×‘×ª×™ ×”×¡×¤×¨
                    </td>
                </tr>
                <tr>
                    <td><strong>â­ Superadmin</strong></td>
                    <td>SafeQ-Admins<br>(×¢× ×”×¨×©××•×ª ××™×•×—×“×•×ª)</td>
                    <td>
                        â€¢ ×›×œ ×”×¨×©××•×ª Admin<br>
                        â€¢ ×”×’×“×¨×•×ª ××¢×¨×›×ª<br>
                        â€¢ × ×™×”×•×œ ××©×ª××©×™ ×—×™×¨×•×<br>
                        â€¢ × ×™×”×•×œ API keys
                    </td>
                </tr>
                <tr>
                    <td><strong>ğŸ« School Manager</strong></td>
                    <td>SafeQ-School-Managers</td>
                    <td>
                        â€¢ <strong>×¨×§</strong> ×¦×¤×™×™×” ×‘×“×•×—×•×ª<br>
                        â€¢ <strong>××•×’×‘×œ</strong> ×œ×‘×ª×™ ×”×¡×¤×¨ ×©×”×•×§×¦×•<br>
                        â€¢ ×œ× ×¨×•××” ××•×“×•×œ×™ × ×™×”×•×œ<br>
                        âŒ ×œ×œ× ×’×™×©×” ×œ××©×ª××©×™×/×§×‘×•×¦×•×ª
                    </td>
                </tr>
            </table>

            <h3>4.2 ×”×¤×¨×“×ª × ×ª×•× ×™× ×œ×¤×™ ×‘×ª×™ ×¡×¤×¨</h3>
            <p>
                ×× ×”×œ×™ ×‘×ª×™ ×¡×¤×¨ (School Managers) ××§×‘×œ×™× ×’×™×©×” ××•×’×‘×œ×ª ×¨×§ ×œ× ×ª×•× ×™× ×©×œ ×‘×ª×™ ×”×¡×¤×¨ ×”××©×•×™×›×™× ××œ×™×”×:
            </p>

            <div class="info-box">
                <strong>ğŸ” ×ª×”×œ×™×š ×”×¤×¨×“×ª ×”× ×ª×•× ×™×:</strong>
                <ol>
                    <li>×× ×”×œ ××–×“×”×” ×‘-Entra ID â†’ ××–×•×”×” ×›-school_manager</li>
                    <li>×”××¢×¨×›×ª ××—×¤×©×ª ××©×ª××© ××§×•××™ ×ª×•×× ×‘-SafeQ Cloud</li>
                    <li>×©×œ×™×¤×ª ×§×‘×•×¦×•×ª ××§×•××™×•×ª ×©××ª×—×™×œ×•×ª ×‘-<code>School_</code></li>
                    <li>×—×™×œ×•×¥ ×©××•×ª ×‘×ª×™ ×¡×¤×¨: <code>School_BeitSefer_A</code> â†’ <code>BeitSefer_A</code></li>
                    <li>×¡×™× ×•×Ÿ ×›×œ ×”×“×•×—×•×ª ×¨×§ ×œ××—×œ×§×•×ª ××œ×•</li>
                </ol>
            </div>

            <h4>×“×•×’××”:</h4>
            <pre><code>××©×ª××©: david.levi@school.org.il
×ª×¤×§×™×“ Entra: school_manager
×§×‘×•×¦×•×ª ××§×•××™×•×ª ×‘-SafeQ:
  - School_HighSchool_Jerusalem
  - School_Elementary_TelAviv

â†’ ×™×›×•×œ ×œ×¨××•×ª ×¨×§ ×“×•×—×•×ª ×©×œ:
  â€¢ HighSchool_Jerusalem
  â€¢ Elementary_TelAviv

â†’ ×œ× ×™×›×•×œ ×œ×¨××•×ª:
  â€¢ ××©×ª××©×™×
  â€¢ ×§×‘×•×¦×•×ª
  â€¢ ×“×•×—×•×ª ×©×œ ×‘×ª×™ ×¡×¤×¨ ××—×¨×™×</code></pre>

            <h3>4.3 ×‘×“×™×§×•×ª ×”×¨×©××” ×‘×–××Ÿ ×¨×™×¦×”</h3>
            <p>×›×œ ×¤×¢×•×œ×” ×‘××¢×¨×›×ª ×¢×•×‘×¨×ª ×‘×“×™×§×ª ×”×¨×©××•×ª:</p>
            <ul>
                <li><strong>Level 1:</strong> ×‘×“×™×§×ª session ×ª×§×£</li>
                <li><strong>Level 2:</strong> ×‘×“×™×§×ª ×ª×¤×§×™×“ ××™× ×™××œ×™ × ×“×¨×©</li>
                <li><strong>Level 3:</strong> ×‘×“×™×§×ª ×’×™×©×” ×œ××©××‘ ×¡×¤×¦×™×¤×™ (×‘×™×ª ×¡×¤×¨/××©×ª××©)</li>
                <li><strong>Level 4:</strong> ×¨×™×©×•× ×›×œ ×¤×¢×•×œ×” ×‘-audit log</li>
            </ul>
        </section>

        <div class="page-break"></div>

        <section id="entra-setup" class="section">
            <h2>5. ğŸ”§ ×”×§××ª ××¤×œ×™×§×¦×™×” ×‘-Entra ID</h2>

            <h3>5.1 ×™×¦×™×¨×ª App Registration</h3>
            <p>×‘×¦×¢ ××ª ×”×©×œ×‘×™× ×”×‘××™× ×‘-Azure Portal:</p>

            <ol>
                <li><strong>×”×™×›× ×¡ ×œ-Azure Portal:</strong> <code>https://portal.azure.com</code></li>
                <li><strong>× ×•×•×˜ ×œ:</strong> Microsoft Entra ID â†’ App registrations â†’ New registration</li>
                <li><strong>××œ× ×¤×¨×˜×™×:</strong>
                    <ul>
                        <li><strong>Name:</strong> SafeQ Cloud Manager</li>
                        <li><strong>Supported account types:</strong> Single tenant</li>
                        <li><strong>Redirect URI:</strong>
                            <ul>
                                <li>Platform: Web</li>
                                <li>URI: <code>https://your-app.railway.app</code></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><strong>×œ×—×¥:</strong> Register</li>
            </ol>

            <h3>5.2 ×”×’×“×¨×ª Authentication</h3>
            <p>×œ××—×¨ ×™×¦×™×¨×ª ×”××¤×œ×™×§×¦×™×”:</p>

            <ol>
                <li><strong>Authentication â†’ Platform configurations:</strong>
                    <ul>
                        <li>×”×•×¡×£ Redirect URI × ×•×¡×¤×™× ×× × ×“×¨×© (×œ×¡×‘×™×‘×•×ª dev/test)</li>
                        <li>×¡××Ÿ: <code>ID tokens</code> ×•-<code>Access tokens</code></li>
                    </ul>
                </li>
                <li><strong>Certificates & secrets:</strong>
                    <ul>
                        <li>×œ×—×¥: New client secret</li>
                        <li>Description: SafeQ Production Secret</li>
                        <li>Expires: 24 months (××•××œ×¥)</li>
                        <li><strong>âš ï¸ ×”×¢×ª×§ ××ª ×”×¡×•×“ ××™×“!</strong> ×œ× × ×™×ª×Ÿ ×œ×¨××•×ª ××•×ª×• ×©×•×‘</li>
                    </ul>
                </li>
            </ol>

            <h3>5.3 API Permissions (×”×¨×©××•×ª × ×“×¨×©×•×ª)</h3>
            <p>×‘××¡×š API permissions, ×”×•×¡×£ ××ª ×”×”×¨×©××•×ª ×”×‘××•×ª:</p>

            <table>
                <tr>
                    <th>API</th>
                    <th>Permission</th>
                    <th>Type</th>
                    <th>×ª×™××•×¨</th>
                </tr>
                <tr>
                    <td rowspan="4"><strong>Microsoft Graph</strong></td>
                    <td>User.Read</td>
                    <td>Delegated</td>
                    <td>×§×¨×™××ª ×¤×¨×•×¤×™×œ ×”××©×ª××© ×”××—×•×‘×¨</td>
                </tr>
                <tr>
                    <td>User.ReadBasic.All</td>
                    <td>Delegated</td>
                    <td>×§×¨×™××ª ××™×“×¢ ×‘×¡×™×¡×™ ×¢×œ ××©×ª××©×™×</td>
                </tr>
                <tr>
                    <td>GroupMember.Read.All</td>
                    <td>Delegated</td>
                    <td>×§×¨×™××ª ×”×©×ª×™×™×›×•×ª ×œ×§×‘×•×¦×•×ª</td>
                </tr>
                <tr>
                    <td>Directory.Read.All</td>
                    <td>Delegated</td>
                    <td>×§×¨×™××ª ××™×“×¢ ×¡×¤×¨×™×™×ª ×”××¨×’×•×Ÿ</td>
                </tr>
            </table>

            <div class="warning-box">
                <strong>âš ï¸ ×—×©×•×‘:</strong> ×œ××—×¨ ×”×•×¡×¤×ª ×”×”×¨×©××•×ª, ×œ×—×¥ ×¢×œ
                <strong>"Grant admin consent for [Your Organization]"</strong>
                ×›×“×™ ×œ××©×¨ ××ª ×”×”×¨×©××•×ª ×¢×‘×•×¨ ×›×œ ×”××©×ª××©×™×.
            </div>

            <h3>5.4 ×™×¦×™×¨×ª ×§×‘×•×¦×•×ª ××‘×˜×—×”</h3>
            <p>×‘-Microsoft Entra ID, ×¦×•×¨ ××ª ×”×§×‘×•×¦×•×ª ×”×‘××•×ª:</p>

            <ol>
                <li><strong>Microsoft Entra ID â†’ Groups â†’ New group</strong></li>
                <li><strong>×¢×‘×•×¨ ×›×œ ×§×‘×•×¦×”:</strong>
                    <ul>
                        <li>Group type: Security</li>
                        <li>Group name: (×œ×¤×™ ×”×˜×‘×œ×” ×œ××˜×”)</li>
                        <li>Group description: ×ª×™××•×¨ ×”×ª×¤×§×™×“</li>
                        <li>Membership type: Assigned</li>
                        <li>×”×•×¡×£ ×—×‘×¨×™× ×¨×œ×•×•× ×˜×™×™×</li>
                    </ul>
                </li>
            </ol>

            <table>
                <tr>
                    <th>×©× ×§×‘×•×¦×”</th>
                    <th>×ª×™××•×¨</th>
                </tr>
                <tr>
                    <td><code>SafeQ-Admins</code></td>
                    <td>×× ×”×œ×™ ××¢×¨×›×ª ×¢× ×”×¨×©××•×ª ××œ××•×ª</td>
                </tr>
                <tr>
                    <td><code>SafeQ-Support</code></td>
                    <td>×¦×•×•×ª ×ª××™×›×” ×˜×›× ×™×ª</td>
                </tr>
                <tr>
                    <td><code>SafeQ-Viewers</code></td>
                    <td>×¦×•×¤×™× - ×¦×¤×™×™×” ×‘×œ×‘×“</td>
                </tr>
                <tr>
                    <td><code>SafeQ-School-Managers</code></td>
                    <td>×× ×”×œ×™ ×‘×ª×™ ×¡×¤×¨ - ×“×•×—×•×ª ×‘×œ×‘×“</td>
                </tr>
            </table>

            <h3>5.5 ×¤×¨×˜×™ ××¤×œ×™×§×¦×™×” ×œ×©××™×¨×”</h3>
            <p>××¡×•×£ ××ª ×”×¤×¨×˜×™× ×”×‘××™× ×•×”×¢×‘×¨ ××•×ª× ×œ×¦×•×•×ª ×”×¤×™×ª×•×—:</p>

            <div class="danger-box">
                <strong>ğŸ” ×¤×¨×˜×™× ×¡×•×“×™×™× - ×©××•×¨ ×‘××§×•× ×××•×‘×˜×—:</strong>
                <ul>
                    <li><strong>Application (client) ID:</strong> [GUID]</li>
                    <li><strong>Directory (tenant) ID:</strong> [GUID]</li>
                    <li><strong>Client Secret Value:</strong> [×¡×•×“ - ×–××™×Ÿ ×¨×§ ×‘×–××Ÿ ×”×™×¦×™×¨×”]</li>
                    <li><strong>Redirect URI:</strong> https://your-app.railway.app</li>
                </ul>
            </div>
        </section>

        <div class="page-break"></div>

        <section id="deployment" class="section">
            <h2>6. ğŸš€ ×¤×¨×™×¡×” ×‘-Railway</h2>

            <h3>6.1 ××•×“×•×ª Railway</h3>
            <p>
                <strong>Railway.app</strong> ×”×™× ×¤×œ×˜×¤×•×¨××ª ×¢× ×Ÿ ××•×“×¨× ×™×ª ×”×××¤×©×¨×ª ×¤×¨×™×¡×” ×§×œ×” ×©×œ ××¤×œ×™×§×¦×™×•×ª
                ×™×©×™×¨×•×ª ×-GitHub. ×”××¢×¨×›×ª ××ª×—×–×§×ª ×‘××•×¤×Ÿ ××•×˜×•××˜×™ ×•××¡×¤×§×ª:
            </p>

            <ul>
                <li>âœ… Automatic deployments ×-GitHub</li>
                <li>âœ… HTTPS ××•×‘× ×” ×¢× SSL certificates</li>
                <li>âœ… Environment variables ×××•×‘×˜×—×™×</li>
                <li>âœ… Logs ×‘×–××Ÿ ×××ª</li>
                <li>âœ… Scaling ××•×˜×•××˜×™</li>
                <li>âœ… Monitoring ×•-metrics</li>
            </ul>

            <h3>6.2 ×”×§××ª ×”×¤×¨×•×™×§×˜ ×‘-Railway</h3>

            <ol>
                <li><strong>×”×ª×—×‘×¨×•×ª:</strong>
                    <ul>
                        <li>×”×™×›× ×¡ ×œ-<code>https://railway.app</code></li>
                        <li>×”×ª×—×‘×¨ ×¢× ×—×©×‘×•×Ÿ GitHub</li>
                    </ul>
                </li>
                <li><strong>×™×¦×™×¨×ª ×¤×¨×•×™×§×˜ ×—×“×©:</strong>
                    <ul>
                        <li>×œ×—×¥: New Project</li>
                        <li>×‘×—×¨: Deploy from GitHub repo</li>
                        <li>×‘×—×¨ ××ª ×”-repository: <code>SafeQCloudManager</code></li>
                        <li>×‘×—×¨ ××ª ×”-branch: <code>main</code> ××• <code>production</code></li>
                    </ul>
                </li>
                <li><strong>×”×’×“×¨×•×ª Build:</strong>
                    <ul>
                        <li>Builder: Nixpacks (×–×™×”×•×™ ××•×˜×•××˜×™)</li>
                        <li>Build Command: <code>pip install -r requirements.txt</code></li>
                        <li>Start Command: <code>streamlit run app/main.py --server.port=$PORT</code></li>
                    </ul>
                </li>
            </ol>

            <h3>6.3 ×”×’×“×¨×ª Environment Variables</h3>
            <p>×‘××¡×š Settings â†’ Variables, ×”×’×“×¨ ××ª ×”××©×ª× ×™× ×”×‘××™×:</p>

            <div class="danger-box">
                <strong>âš ï¸ ××©×ª× ×™× ×§×¨×™×˜×™×™× - ×”×’×“×¨ ×‘-Railway ×‘×œ×‘×“!</strong>
            </div>

            <table>
                <tr>
                    <th>××©×ª× ×”</th>
                    <th>×¢×¨×š ×œ×“×•×’××”</th>
                    <th>×”×¡×‘×¨</th>
                </tr>
                <tr>
                    <td><code>SAFEQ_API_KEY</code></td>
                    <td>[API Key ×-SafeQ]</td>
                    <td>××¤×ª×— API ×œ×’×™×©×” ×œ-SafeQ Cloud</td>
                </tr>
                <tr>
                    <td><code>SAFEQ_BASE_URL</code></td>
                    <td>https://cloud.safeq.com</td>
                    <td>×›×ª×•×‘×ª ×‘×¡×™×¡ ×©×œ SafeQ Cloud API</td>
                </tr>
                <tr>
                    <td><code>ENTRA_CLIENT_ID</code></td>
                    <td>[GUID ×-Azure]</td>
                    <td>Application (client) ID</td>
                </tr>
                <tr>
                    <td><code>ENTRA_CLIENT_SECRET</code></td>
                    <td>[Secret ×-Azure]</td>
                    <td>Client Secret Value</td>
                </tr>
                <tr>
                    <td><code>ENTRA_TENANT_ID</code></td>
                    <td>[GUID ×-Azure]</td>
                    <td>Directory (tenant) ID</td>
                </tr>
                <tr>
                    <td><code>ENTRA_REDIRECT_URI</code></td>
                    <td>https://your-app.railway.app</td>
                    <td>Redirect URI (×—×™×™×‘ ×œ×”×™×•×ª ×–×”×” ×œ-Azure)</td>
                </tr>
                <tr>
                    <td><code>EMERGENCY_USER_admin</code></td>
                    <td>[×¡×™×¡××” ×—×–×§×”]</td>
                    <td>××©×ª××© ×—×™×¨×•× ×œ×ª×—×–×•×§×”</td>
                </tr>
                <tr>
                    <td><code>SESSION_TIMEOUT</code></td>
                    <td>480</td>
                    <td>××©×š session ×‘×“×§×•×ª (8 ×©×¢×•×ª)</td>
                </tr>
            </table>

            <h3>6.4 Custom Domain (××•×¤×¦×™×•× ×œ×™)</h3>
            <p>× ×™×ª×Ÿ ×œ×”×’×“×™×¨ domain ××•×ª×× ××™×©×™×ª:</p>
            <ol>
                <li>Settings â†’ Domains</li>
                <li>Add Custom Domain</li>
                <li>×”×–×Ÿ ××ª ×”-domain ×©×œ×š (×œ×“×•×’××”: <code>safeq.school.org.il</code>)</li>
                <li>×¢×“×›×Ÿ DNS records ××¦×œ ×¡×¤×§ ×”-domain</li>
                <li>Railway ×™×¡×¤×§ ××•×˜×•××˜×™×ª SSL certificate</li>
            </ol>

            <h3>6.5 Deployment Workflow</h3>
            <p>×›×œ push ×œ-branch ×”×¨××©×™ ××¤×¢×™×œ deployment ××•×˜×•××˜×™:</p>

            <pre><code>1. Developer â†’ Push code to GitHub
2. GitHub â†’ Webhook ×œ-Railway
3. Railway â†’ Pull latest code
4. Railway â†’ Build application (pip install)
5. Railway â†’ Run tests (××•×¤×¦×™×•× ×œ×™)
6. Railway â†’ Deploy to production
7. Railway â†’ Health check
8. âœ… Live!</code></pre>

            <div class="success-box">
                <strong>âœ… Zero-downtime deployment:</strong> Railway ××‘×¦×¢ rolling deployment -
                ×”××¢×¨×›×ª ×”×—×“×©×” ×¢×•×œ×” ×œ×¤× ×™ ×©×”×™×©× ×” ×™×•×¨×“×ª, ×œ×œ× ×”×¤×¡×§×ª ×©×™×¨×•×ª.
            </div>
        </section>

        <div class="page-break"></div>

        <section id="security" class="section">
            <h2>7. ğŸ”’ ××‘×˜×—×” ×•×¡×•×“×™×•×ª</h2>

            <h3>7.1 ×©×›×‘×•×ª ××‘×˜×—×”</h3>

            <h4>×©×›×‘×” 1: Transport Layer Security (TLS)</h4>
            <ul>
                <li>âœ… ×›×œ ×”×ª×§×©×•×¨×ª ××•×¦×¤× ×ª ×‘-HTTPS/TLS 1.3</li>
                <li>âœ… SSL certificates ×-Let's Encrypt (× ×™×”×•×œ ××•×˜×•××˜×™ ×¢"×™ Railway)</li>
                <li>âœ… HSTS Headers ××•×¤×¢×œ×™×</li>
            </ul>

            <h4>×©×›×‘×” 2: Authentication & Authorization</h4>
            <ul>
                <li>âœ… OAuth 2.0 + OpenID Connect ×¢× Entra ID</li>
                <li>âœ… Multi-factor Authentication (MFA) ×“×¨×š Entra ID</li>
                <li>âœ… Role-Based Access Control (RBAC)</li>
                <li>âœ… Session timeout ××•×˜×•××˜×™ (8 ×©×¢×•×ª)</li>
            </ul>

            <h4>×©×›×‘×” 3: Data Protection</h4>
            <ul>
                <li>âœ… Secrets ×××•×—×¡× ×™× ×¨×§ ×‘-Railway environment variables</li>
                <li>âœ… ××™×Ÿ ××—×¡×•×Ÿ ××§×•××™ ×©×œ credentials</li>
                <li>âœ… API tokens ××ª×—×“×©×™× ××•×˜×•××˜×™×ª</li>
                <li>âœ… Audit logging ×©×œ ×›×œ ×”×¤×¢×•×œ×•×ª</li>
            </ul>

            <h4>×©×›×‘×” 4: Application Security</h4>
            <ul>
                <li>âœ… Input validation ×•-sanitization</li>
                <li>âœ… Protection ××¤× ×™ SQL Injection (parameterized queries)</li>
                <li>âœ… CSRF protection</li>
                <li>âœ… XSS prevention</li>
            </ul>

            <h3>7.2 × ×™×”×•×œ Secrets</h3>

            <div class="info-box">
                <strong>ğŸ” ×”×¤×¨×“×” ××•×—×œ×˜×ª ×©×œ ×§×•×“ ×•-secrets:</strong>
                <ol>
                    <li><strong>Repository (GitHub):</strong>
                        <ul>
                            <li>Private repository</li>
                            <li>×§×•×“ ×‘×œ×‘×“ - ×œ×œ× secrets</li>
                            <li>Access control ××•×’×‘×œ</li>
                            <li>.gitignore ××•× ×¢ commit ×©×œ ×§×‘×¦×™ secrets</li>
                        </ul>
                    </li>
                    <li><strong>Railway Environment:</strong>
                        <ul>
                            <li>Secrets ××•×¦×¤× ×™× ×‘-rest</li>
                            <li>×’×™×©×” ×¨×§ ×œ×‘×¢×œ×™ ×”×¨×©××•×ª</li>
                            <li>Audit log ×©×œ ×©×™× ×•×™×™×</li>
                            <li>×œ× × ×—×©×¤×™× ×‘-logs</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <h3>7.3 GitHub Repository Security</h3>
            <table>
                <tr>
                    <th>×”×’×“×¨×”</th>
                    <th>×¡×˜×˜×•×¡</th>
                    <th>×”×¡×‘×¨</th>
                </tr>
                <tr>
                    <td><strong>Visibility</strong></td>
                    <td>ğŸ”’ Private</td>
                    <td>×’×™×©×” ××•×’×‘×œ×ª ×œ×¦×•×•×ª ××•×¨×©×” ×‘×œ×‘×“</td>
                </tr>
                <tr>
                    <td><strong>Branch Protection</strong></td>
                    <td>âœ… Enabled</td>
                    <td>Main branch ××•×’×Ÿ ××¤× ×™ push ×™×©×™×¨</td>
                </tr>
                <tr>
                    <td><strong>Required Reviews</strong></td>
                    <td>âœ… 1+ reviewers</td>
                    <td>×›×œ PR ×“×•×¨×© ××™×©×•×¨</td>
                </tr>
                <tr>
                    <td><strong>Secrets Scanning</strong></td>
                    <td>âœ… Enabled</td>
                    <td>×–×™×”×•×™ ××•×˜×•××˜×™ ×©×œ secrets ×©× ×—×©×¤×•</td>
                </tr>
                <tr>
                    <td><strong>Dependabot</strong></td>
                    <td>âœ… Enabled</td>
                    <td>×¢×“×›×•× ×™ ××‘×˜×—×” ××•×˜×•××˜×™×™×</td>
                </tr>
            </table>

            <h3>7.4 Audit Logging</h3>
            <p>×›×œ ×¤×¢×•×œ×” ×‘××¢×¨×›×ª × ×¨×©××ª ×‘-audit log:</p>

            <pre><code>Logged Events:
â€¢ Login/Logout attempts
â€¢ User creation/modification/deletion
â€¢ Group changes
â€¢ Permission changes
â€¢ Report generation
â€¢ Failed authentication attempts
â€¢ API calls

Log Format:
{
  "timestamp": "2025-11-19T10:30:00Z",
  "user": "yossi.cohen@school.org.il",
  "action": "USER_EDIT",
  "details": "Modified user: david.levi",
  "ip_address": "1.2.3.4",
  "status": "success"
}</code></pre>

            <h3>7.5 ××“×™× ×™×•×ª ×¡×™×¡×××•×ª (Emergency Users)</h3>
            <div class="warning-box">
                <strong>×“×¨×™×©×•×ª ××™× ×™××•×:</strong>
                <ul>
                    <li>××•×¨×š: 12 ×ª×•×•×™× ×œ×¤×—×•×ª</li>
                    <li>××•×¨×›×‘×•×ª: ××•×ª×™×•×ª ×’×“×•×œ×•×ª, ×§×˜× ×•×ª, ××¡×¤×¨×™× ×•×¡×™×× ×™×</li>
                    <li>×”×—×œ×¤×”: ×›×œ 90 ×™×•×</li>
                    <li>××—×¡×•×Ÿ: ×¨×§ ×‘-Railway environment variables</li>
                    <li>××™×Ÿ ×©×™××•×© ×—×•×–×¨ ×‘×¡×™×¡×××•×ª ×™×©× ×•×ª</li>
                </ul>
            </div>

            <h3>7.6 Compliance & Standards</h3>
            <ul>
                <li>âœ… <strong>GDPR:</strong> ×–×›×•×ª ×œ××—×™×§×ª × ×ª×•× ×™×, data portability</li>
                <li>âœ… <strong>ISO 27001:</strong> ×ª×§×Ÿ × ×™×”×•×œ ××‘×˜×—×ª ××™×“×¢</li>
                <li>âœ… <strong>OWASP Top 10:</strong> ×”×’× ×” ××¤× ×™ ×¤×’×™×¢×•×™×•×ª × ×¤×•×¦×•×ª</li>
                <li>âœ… <strong>OAuth 2.0 Best Practices:</strong> ×ª×§× ×™ ××™××•×ª ××•×“×¨× ×™×™×</li>
            </ul>
        </section>

        <div class="page-break"></div>

        <section id="maintenance" class="section">
            <h2>8. ğŸ”§ ×ª×—×–×•×§×” ×•×ª××™×›×”</h2>

            <h3>8.1 × ×™×˜×•×¨ ×•×‘×§×¨×”</h3>

            <h4>Railway Dashboard</h4>
            <p>×”× ×™×˜×•×¨ × ×¢×©×” ×“×¨×š Railway dashboard:</p>
            <ul>
                <li><strong>Deployment Status:</strong> ××¦×‘ deployment ××—×¨×•×Ÿ</li>
                <li><strong>Resource Usage:</strong> CPU, Memory, Network</li>
                <li><strong>Logs:</strong> ×œ×•×’×™× ×‘×–××Ÿ ×××ª</li>
                <li><strong>Metrics:</strong> Response times, Error rates</li>
            </ul>

            <h4>Application Logs</h4>
            <p>×œ×•×’×™× ×–××™× ×™× ×‘-Railway â†’ Project â†’ Logs:</p>
            <pre><code>×¡×•×’×™ ×œ×•×’×™×:
â€¢ Application logs (Python/Streamlit)
â€¢ Access logs (HTTP requests)
â€¢ Error logs (Exceptions & Stack traces)
â€¢ Audit logs (User actions)

×©××™×¨×ª ×œ×•×’×™×: 7 ×™××™× (Plan dependent)</code></pre>

            <h3>8.2 ×’×™×‘×•×™×™×</h3>

            <div class="info-box">
                <strong>××¡×˜×¨×˜×’×™×™×ª ×’×™×‘×•×™×™×:</strong>
                <ol>
                    <li><strong>×§×•×“:</strong> ×©××•×¨ ×‘-GitHub (Git history ××œ×)</li>
                    <li><strong>Environment Variables:</strong> ×™×© ×œ×’×‘×•×ª ×™×“× ×™×ª ×•×œ×©××•×¨ ×‘××§×•× ×××•×‘×˜×—</li>
                    <li><strong>× ×ª×•× ×™ SafeQ:</strong> ××’×•×‘×™× ××•×˜×•××˜×™×ª ×¢"×™ SafeQ Cloud</li>
                    <li><strong>×ª×¦×•×¨×•×ª:</strong> ××ª×•×¢×“×•×ª ×‘-Railway ×•-version controlled</li>
                </ol>
            </div>

            <h3>8.3 ×¢×“×›×•× ×™×</h3>

            <h4>×¢×“×›×•× ×™ ××‘×˜×—×”</h4>
            <ul>
                <li><strong>Dependencies:</strong> Dependabot ××–×”×” ×•××ª×¨×™×¢ ×¢×œ ×¤×’×™×¢×•×™×•×ª</li>
                <li><strong>Python Packages:</strong> ×‘×“×™×§×” ×©×‘×•×¢×™×ª ×¢× <code>pip-audit</code></li>
                <li><strong>Streamlit:</strong> ×¢×“×›×•×Ÿ ×œ×’×¨×¡××•×ª ×™×¦×™×‘×•×ª</li>
            </ul>

            <h4>×ª×”×œ×™×š ×¢×“×›×•×Ÿ</h4>
            <ol>
                <li>×¤×™×ª×•×— ×•×”×¨×¦×” ×‘-development environment</li>
                <li>Testing ××§×™×£ (unit tests + integration tests)</li>
                <li>Staging deployment (×× ×§×™×™×)</li>
                <li>Code review ×•-approval</li>
                <li>Merge ×œ-main branch</li>
                <li>Automatic deployment ×œ-production</li>
                <li>Monitoring ×•-validation</li>
            </ol>

            <h3>8.4 ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª × ×¤×•×¦×•×ª</h3>

            <table>
                <tr>
                    <th>×‘×¢×™×”</th>
                    <th>×¤×ª×¨×•×Ÿ</th>
                </tr>
                <tr>
                    <td>âŒ ×œ× ××¦×œ×™×— ×œ×”×ª×—×‘×¨ ×¢× Entra ID</td>
                    <td>
                        1. ×‘×“×•×§ Redirect URI ×‘-Azure ×•-Railway<br>
                        2. ×•×“× ×©×”××©×ª××© ×—×‘×¨ ×‘×§×‘×•×¦×ª SafeQ<br>
                        3. ×‘×“×•×§ Client Secret (×œ× ×¤×’ ×ª×•×§×£?)
                    </td>
                </tr>
                <tr>
                    <td>âŒ "××™××•×ª ×”×¨×©××•×ª × ×›×©×œ"</td>
                    <td>
                        1. ×•×“× ×©×™×© ××©×ª××© ××§×•××™ ×ª×•×× ×‘-SafeQ<br>
                        2. ×‘×“×•×§ ×©×”××©×ª××© ×©×™×™×š ×œ×§×‘×•×¦×•×ª ××§×•××™×•×ª<br>
                        3. ×‘×“×•×§ ××ª SAFEQ_API_KEY ×‘-Railway
                    </td>
                </tr>
                <tr>
                    <td>âŒ "×”×’×™×©×” × ×“×—×ª×”"</td>
                    <td>
                        1. ×‘×“×•×§ ×”×©×ª×™×™×›×•×ª ×œ×§×‘×•×¦×•×ª Entra ID<br>
                        2. ×•×“× ×©×”×§×‘×•×¦×•×ª ×§×™×™××•×ª ×‘-Azure<br>
                        3. ×‘×“×•×§ ××ª ROLE_MAPPING ×‘-config
                    </td>
                </tr>
                <tr>
                    <td>âš ï¸ Application ×œ× ×¢×•×œ×” ×‘-Railway</td>
                    <td>
                        1. ×‘×“×•×§ Logs ×‘-Railway<br>
                        2. ×•×“× ×©×›×œ Environment Variables ××•×’×“×¨×™×<br>
                        3. ×‘×“×•×§ Build logs ×œ×©×’×™××•×ª
                    </td>
                </tr>
                <tr>
                    <td>âš ï¸ ×‘×™×¦×•×¢×™× ××™×˜×™×™×</td>
                    <td>
                        1. ×‘×“×•×§ Resource Usage ×‘-Railway<br>
                        2. ×©×§×•×œ upgrade ×©×œ Plan<br>
                        3. ××•×¤×˜×™××™×–×¦×™×” ×©×œ queries ×œ-API
                    </td>
                </tr>
            </table>

            <h3>8.5 ××™×© ×§×©×¨ ×œ×ª××™×›×”</h3>
            <div class="success-box">
                <strong>ğŸ“ ×¤×¨×˜×™ ×ª××™×›×” ×˜×›× ×™×ª:</strong>
                <ul>
                    <li><strong>×—×‘×¨×”:</strong> Mafil Solutions</li>
                    <li><strong>××ª×¨:</strong> [URL ×©×œ ×”××ª×¨]</li>
                    <li><strong>××™××™×™×œ ×ª××™×›×”:</strong> support@mafil.co.il</li>
                    <li><strong>×˜×œ×¤×•×Ÿ:</strong> [××¡×¤×¨ ×˜×œ×¤×•×Ÿ]</li>
                    <li><strong>×©×¢×•×ª ×ª××™×›×”:</strong> ××³-×”×³, 09:00-17:00</li>
                </ul>
            </div>

            <h3>8.6 SLA (Service Level Agreement)</h3>
            <table>
                <tr>
                    <th>××“×“</th>
                    <th>×™×¢×“</th>
                </tr>
                <tr>
                    <td><strong>Uptime</strong></td>
                    <td>99.5% (Railway SLA)</td>
                </tr>
                <tr>
                    <td><strong>Response Time</strong></td>
                    <td>&lt; 2 ×©× ×™×•×ª (90th percentile)</td>
                </tr>
                <tr>
                    <td><strong>×ª×’×•×‘×” ×œ×‘×¢×™×” ×§×¨×™×˜×™×ª</strong></td>
                    <td>×ª×•×š 4 ×©×¢×•×ª ×¢×‘×•×“×”</td>
                </tr>
                <tr>
                    <td><strong>×ª×’×•×‘×” ×œ×‘×¢×™×” ×¨×’×™×œ×”</strong></td>
                    <td>×ª×•×š ×™×•× ×¢×‘×•×“×” ××—×“</td>
                </tr>
                <tr>
                    <td><strong>×¢×“×›×•× ×™ ××‘×˜×—×”</strong></td>
                    <td>×ª×•×š 48 ×©×¢×•×ª ××–×™×”×•×™</td>
                </tr>
            </table>
        </section>

        <div class="page-break"></div>

        <!-- Summary / Conclusion -->
        <section class="section">
            <h2>9. ğŸ“ ×¡×™×›×•×</h2>

            <p>
                ××¢×¨×›×ª <strong>SafeQ Cloud Manager</strong> ××¡×¤×§×ª ×¤×ª×¨×•×Ÿ ××§×™×£ ×•×××•×‘×˜×— ×œ× ×™×”×•×œ ××©×ª××©×™×
                ×•×§×‘×•×¦×•×ª ×‘××¢×¨×›×ª SafeQ Cloud, ×ª×•×š ×©×™××•×© ×‘××™××•×ª ××•×“×¨× ×™ ×•×× ×’× ×•× ×™ ×”×¨×©××” ××ª×§×“××™×.
            </p>

            <h3>× ×§×•×“×•×ª ××¤×ª×—:</h3>
            <ul>
                <li>âœ… <strong>××™××•×ª ×”×™×‘×¨×™×“×™:</strong> ×©×™×œ×•×‘ Entra ID + SafeQ Cloud ×œ××‘×˜×—×” ××¨×‘×™×ª</li>
                <li>âœ… <strong>×”×¨×©××•×ª ×’×¨× ×•×œ×¨×™×•×ª:</strong> 5 ×¨××•×ª ×”×¨×©××” ×¢× ×”×¤×¨×“×ª × ×ª×•× ×™× ×œ×¤×™ ×‘×ª×™ ×¡×¤×¨</li>
                <li>âœ… <strong>×¤×¨×™×¡×” ×××•×‘×˜×—×ª:</strong> Railway ×¢× secrets ××•×¦×¤× ×™× ×•×”×¤×¨×“×” ××§×•×“</li>
                <li>âœ… <strong>× ×™×˜×•×¨ ××œ×:</strong> Audit logs, metrics ×•-monitoring ×‘×–××Ÿ ×××ª</li>
                <li>âœ… <strong>×ª×—×–×•×§×” ×§×œ×”:</strong> Automatic deployments ×•×¢×“×›×•× ×™ ××‘×˜×—×”</li>
            </ul>

            <div class="success-box">
                <strong>ğŸ¯ ×”××¢×¨×›×ª ××•×›× ×” ×œ×©×™××•×© ×‘×™×™×¦×•×¨!</strong><br>
                ×¢×§×•×‘ ××—×¨ ×”×”× ×—×™×•×ª ×‘××¡××š ×–×” ×›×“×™ ×œ×”×‘×˜×™×— ×¤×¨×™×¡×” ××•×¦×œ×—×ª ×•×××•×‘×˜×—×ª.
            </div>
        </section>

        <!-- Footer -->
        <div class="footer">
            <p><strong>SafeQ Cloud Manager v2.0.1</strong></p>
            <p>Â© 2025 Mafil Solutions. ×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª.</p>
            <p>××¡××š ×–×” ××™×•×¢×“ ×œ×©×™××•×© ×¤× ×™××™ ×‘×œ×‘×“ ×•××›×™×œ ××™×“×¢ ×¨×’×™×©.</p>
            <p style="margin-top: 20px; font-size: 12px; color: #999;">
                ×ª××¨×™×š ×™×¦×™×¨×”: × ×•×‘××‘×¨ 2025 | ×’×¨×¡×ª ××¡××š: 1.0
            </p>
        </div>
    </div>
</body>
</html>
